Ó2
xC:\Users\cognizantdotnet31\source\repos\SchoolSystem\BusinessService\BusinessService.Api\Controllers\SchoolController.cs
	namespace		 	
BusinessService		
 
.		 
Api		 
.		 
Controllers		 )
{

 
[ 
Route 

(
 
$str 
) 
] 
[ 
ApiController 
] 
public 

class 
SchoolController !
:" #
ControllerBase$ 2
{ 
private 
readonly $
BusinessServiceDbContext 1
_context2 :
;: ;
public 
SchoolController 
(  $
BusinessServiceDbContext  8
context9 @
)@ A
{ 	
this 
. 
_context 
= 
context #
;# $
} 	
[ 	
HttpGet	 
] 
public 
async 
Task 
< 
ActionResult &
<& '
IEnumerable' 2
<2 3
School3 9
>9 :
>: ;
>; <
	GetSchool= F
(F G
)G H
{ 	
return 
await 
_context !
.! "
Schools" )
.) *
ToListAsync* 5
(5 6
)6 7
;7 8
} 	
[ 	
HttpGet	 
( 
$str 
) 
] 
public   
async   
Task   
<   
ActionResult   &
<  & '
School  ' -
>  - .
>  . /
	GetSchool  0 9
(  9 :
int  : =
id  > @
)  @ A
{!! 	
var"" 
school"" 
="" 
await"" 
_context"" '
.""' (
Schools""( /
.""/ 0
	FindAsync""0 9
(""9 :
id"": <
)""< =
;""= >
if$$ 
($$ 
school$$ 
==$$ 
null$$ 
)$$ 
{%% 
return&& 
NotFound&& 
(&&  
)&&  !
;&&! "
}'' 
return)) 
school)) 
;)) 
}** 	
[.. 	
HttpPut..	 
(.. 
$str.. 
).. 
].. 
public// 
async// 
Task// 
<// 
IActionResult// '
>//' (
	PutSchool//) 2
(//2 3
int//3 6
id//7 9
,//9 :
School//; A
school//B H
)//H I
{00 	
if11 
(11 
id11 
!=11 
school11 
.11 
SchoolID11 %
)11% &
{22 
return33 

BadRequest33 !
(33! "
)33" #
;33# $
}44 
_context66 
.66 
Entry66 
(66 
school66 !
)66! "
.66" #
State66# (
=66) *
EntityState66+ 6
.666 7
Modified667 ?
;66? @
try88 
{99 
await:: 
_context:: 
.:: 
SaveChangesAsync:: /
(::/ 0
)::0 1
;::1 2
};; 
catch<< 
(<< (
DbUpdateConcurrencyException<< /
)<</ 0
{== 
if>> 
(>> 
!>> 
SchoolExists>> !
(>>! "
id>>" $
)>>$ %
)>>% &
{?? 
return@@ 
NotFound@@ #
(@@# $
)@@$ %
;@@% &
}AA 
elseBB 
{CC 
throwDD 
;DD 
}EE 
}FF 
returnHH 
	NoContentHH 
(HH 
)HH 
;HH 
}II 	
[MM 	
HttpPostMM	 
]MM 
publicNN 
asyncNN 
TaskNN 
<NN 
ActionResultNN &
<NN& '
SchoolNN' -
>NN- .
>NN. /

PostSchoolNN0 :
(NN: ;
SchoolNN; A
schoolNNB H
)NNH I
{OO 	
_contextPP 
.PP 
SchoolsPP 
.PP 
AddPP  
(PP  !
schoolPP! '
)PP' (
;PP( )
awaitQQ 
_contextQQ 
.QQ 
SaveChangesAsyncQQ +
(QQ+ ,
)QQ, -
;QQ- .
returnRR 
CreatedAtActionRR "
(RR" #
$strRR# .
,RR. /
newRR0 3
{RR4 5
idRR6 8
=RR9 :
schoolRR; A
.RRA B
SchoolIDRRB J
}RRK L
,RRL M
schoolRRN T
)RRT U
;RRU V
}SS 	
[VV 	

HttpDeleteVV	 
(VV 
$strVV 
)VV 
]VV 
publicWW 
asyncWW 
TaskWW 
<WW 
ActionResultWW &
<WW& '
SchoolWW' -
>WW- .
>WW. /
DeleteSchoolWW0 <
(WW< =
intWW= @
idWWA C
)WWC D
{XX 	
varYY 
schoolYY 
=YY 
awaitYY 
_contextYY '
.YY' (
SchoolsYY( /
.YY/ 0
	FindAsyncYY0 9
(YY9 :
idYY: <
)YY< =
;YY= >
ifZZ 
(ZZ 
schoolZZ 
==ZZ 
nullZZ 
)ZZ 
{[[ 
return\\ 
NotFound\\ 
(\\  
)\\  !
;\\! "
}]] 
_context__ 
.__ 
Schools__ 
.__ 
Remove__ #
(__# $
school__$ *
)__* +
;__+ ,
await`` 
_context`` 
.`` 
SaveChangesAsync`` +
(``+ ,
)``, -
;``- .
returnbb 
schoolbb 
;bb 
}cc 	
privatedd 
booldd 
SchoolExistsdd !
(dd! "
intdd" %
iddd& (
)dd( )
{ee 	
returnff 
_contextff 
.ff 
Schoolsff #
.ff# $
Anyff$ '
(ff' (
eff( )
=>ff* ,
eff- .
.ff. /
SchoolIDff/ 7
==ff8 :
idff; =
)ff= >
;ff> ?
}gg 	
}hh 
}ii „3
{C:\Users\cognizantdotnet31\source\repos\SchoolSystem\BusinessService\BusinessService.Api\Controllers\StandardsController.cs
	namespace		 	
BusinessService		
 
.		 
Api		 
.		 
Controllers		 )
{

 
[ 
Route 

(
 
$str 
) 
] 
[ 
ApiController 
] 
public 

class 
StandardsController $
:% &
ControllerBase' 5
{ 
private 
readonly $
BusinessServiceDbContext 1
_context2 :
;: ;
public 
StandardsController "
(" #$
BusinessServiceDbContext# ;
context< C
)C D
{ 	
_context 
= 
context 
; 
} 	
[ 	
HttpGet	 
] 
public 
async 
Task 
< 
ActionResult &
<& '
IEnumerable' 2
<2 3
Standard3 ;
>; <
>< =
>= >
GetStandards? K
(K L
)L M
{ 	
return 
await 
_context !
.! "
	Standards" +
.+ ,
ToListAsync, 7
(7 8
)8 9
;9 :
} 	
[ 	
HttpGet	 
( 
$str 
) 
] 
public 
async 
Task 
< 
ActionResult &
<& '
Standard' /
>/ 0
>0 1
GetStandard2 =
(= >
int> A
idB D
)D E
{   	
var!! 
standard!! 
=!! 
await!!  
_context!!! )
.!!) *
	Standards!!* 3
.!!3 4
	FindAsync!!4 =
(!!= >
id!!> @
)!!@ A
;!!A B
if## 
(## 
standard## 
==## 
null##  
)##  !
{$$ 
return%% 
NotFound%% 
(%%  
)%%  !
;%%! "
}&& 
return(( 
standard(( 
;(( 
})) 	
[.. 	
HttpPut..	 
(.. 
$str.. 
).. 
].. 
public// 
async// 
Task// 
<// 
IActionResult// '
>//' (
PutStandard//) 4
(//4 5
int//5 8
id//9 ;
,//; <
Standard//= E
standard//F N
)//N O
{00 	
if11 
(11 
id11 
!=11 
standard11 
.11 

StandardId11 )
)11) *
{22 
return33 

BadRequest33 !
(33! "
)33" #
;33# $
}44 
_context66 
.66 
Entry66 
(66 
standard66 #
)66# $
.66$ %
State66% *
=66+ ,
EntityState66- 8
.668 9
Modified669 A
;66A B
try88 
{99 
await:: 
_context:: 
.:: 
SaveChangesAsync:: /
(::/ 0
)::0 1
;::1 2
};; 
catch<< 
(<< (
DbUpdateConcurrencyException<< /
)<</ 0
{== 
if>> 
(>> 
!>> 
StandardExists>> #
(>># $
id>>$ &
)>>& '
)>>' (
{?? 
return@@ 
NotFound@@ #
(@@# $
)@@$ %
;@@% &
}AA 
elseBB 
{CC 
throwDD 
;DD 
}EE 
}FF 
returnHH 
	NoContentHH 
(HH 
)HH 
;HH 
}II 	
[NN 	
HttpPostNN	 
]NN 
publicOO 
asyncOO 
TaskOO 
<OO 
ActionResultOO &
<OO& '
StandardOO' /
>OO/ 0
>OO0 1
PostStandardOO2 >
(OO> ?
StandardOO? G
standardOOH P
)OOP Q
{PP 	
_contextQQ 
.QQ 
	StandardsQQ 
.QQ 
AddQQ "
(QQ" #
standardQQ# +
)QQ+ ,
;QQ, -
awaitRR 
_contextRR 
.RR 
SaveChangesAsyncRR +
(RR+ ,
)RR, -
;RR- .
returnTT 
CreatedAtActionTT "
(TT" #
$strTT# 0
,TT0 1
newTT2 5
{TT6 7
idTT8 :
=TT; <
standardTT= E
.TTE F

StandardIdTTF P
}TTQ R
,TTR S
standardTTT \
)TT\ ]
;TT] ^
}UU 	
[XX 	

HttpDeleteXX	 
(XX 
$strXX 
)XX 
]XX 
publicYY 
asyncYY 
TaskYY 
<YY 
ActionResultYY &
<YY& '
StandardYY' /
>YY/ 0
>YY0 1
DeleteStandardYY2 @
(YY@ A
intYYA D
idYYE G
)YYG H
{ZZ 	
var[[ 
standard[[ 
=[[ 
await[[  
_context[[! )
.[[) *
	Standards[[* 3
.[[3 4
	FindAsync[[4 =
([[= >
id[[> @
)[[@ A
;[[A B
if\\ 
(\\ 
standard\\ 
==\\ 
null\\  
)\\  !
{]] 
return^^ 
NotFound^^ 
(^^  
)^^  !
;^^! "
}__ 
_contextaa 
.aa 
	Standardsaa 
.aa 
Removeaa %
(aa% &
standardaa& .
)aa. /
;aa/ 0
awaitbb 
_contextbb 
.bb 
SaveChangesAsyncbb +
(bb+ ,
)bb, -
;bb- .
returndd 
standarddd 
;dd 
}ee 	
privategg 
boolgg 
StandardExistsgg #
(gg# $
intgg$ '
idgg( *
)gg* +
{hh 	
returnii 
_contextii 
.ii 
	Standardsii %
.ii% &
Anyii& )
(ii) *
eii* +
=>ii, .
eii/ 0
.ii0 1

StandardIdii1 ;
==ii< >
idii? A
)iiA B
;iiB C
}jj 	
}kk 
}ll Á6
zC:\Users\cognizantdotnet31\source\repos\SchoolSystem\BusinessService\BusinessService.Api\Controllers\StudentsController.cs
	namespace 	
BusinessService
 
. 
Api 
. 
Controllers )
{ 
[		 
Route		 

(		
 
$str		 
)		 
]		 
[

 
ApiController

 
]

 
public 

class 
StudentsController #
:$ %

Controller& 0
{ 
private 
readonly 

UnitOfWork #
_uow$ (
;( )
private 
readonly 
ILogger  
<  !
StudentsController! 3
>3 4
_logger5 <
;< =
public 
StudentsController !
(! "
IUnitofWork" -
uow. 1
,1 2
ILogger3 :
<: ;
StudentsController; M
>M N
loggerO U
)U V
{ 	
this 
. 
_uow 
= 
uow 
as 

UnitOfWork )
;) *
this 
. 
_logger 
= 
logger !
;! "
} 	
[ 	
HttpGet	 
] 
public 
ActionResult 
< 
IEnumerable '
<' (
Student( /
>/ 0
>0 1

GetStudent2 <
(< =
)= >
{ 	
_logger 
. 
LogInformation "
(" #
$str# K
)K L
;L M
return 
this 
. 
_uow 
. 
StudentService +
.+ , 
GetFirstFiveStudents, @
(@ A
)A B
.B C
ToListC I
(I J
)J K
;K L
} 	
[ 	
HttpGet	 
( 
$str 
) 
] 
public   
ActionResult   
<   
Student   #
>  # $

GetStudent  % /
(  / 0
int  0 3
id  4 6
)  6 7
{!! 	
var"" 
student"" 
="" 
this"" 
."" 
_uow"" #
.""# $
StudentService""$ 2
.""2 3
GetById""3 :
("": ;
id""; =
)""= >
;""> ?
if## 
(## 
student## 
==## 
null## 
)##  
{$$ 
_logger%% 
.%% 
LogInformation%% &
(%%& '
$str%%' :
)%%: ;
;%%; <
}&& 
return'' 
this'' 
.'' 
_uow'' 
.'' 
StudentService'' +
.''+ ,
GetById'', 3
(''3 4
id''4 6
)''6 7
;''7 8
}(( 	
[** 	
HttpPut**	 
(** 
$str** 
)** 
]** 
public++ 
ActionResult++ 
<++ 
IEnumerable++ '
<++' (
Student++( /
>++/ 0
>++0 1
	PutSchool++2 ;
(++; <
int++< ?
id++@ B
,++B C
Student++D K
student++L S
)++S T
{,, 	
this-- 
.-- 
_uow-- 
.-- 
StudentService-- $
.--$ %
Update--% +
(--+ ,
student--, 3
)--3 4
;--4 5
return.. 
this.. 
... 
_uow.. 
... 
StudentService.. +
...+ ,
GetAll.., 2
(..2 3
)..3 4
...4 5
ToList..5 ;
(..; <
)..< =
;..= >
}// 	
[22 	
HttpPost22	 
]22 
public33 
ActionResult33 
<33 
Student33 #
>33# $

AddStudent33% /
(33/ 0
Student330 7
student338 ?
)33? @
{44 	
if55 
(55 
student55 
!=55 
null55 
)55  
{66 
this77 
.77 
_uow77 
.77 
StudentService77 (
.77( )
Add77) ,
(77, -
student77- 4
)774 5
;775 6
try88 
{99 
this:: 
.:: 
_uow:: 
.:: 
Commit:: $
(::$ %
)::% &
;::& '
};; 
catch<< 
(<< 
System<< 
.<< 
	Exception<< '
e<<( )
)<<) *
{== 
_logger>> 
.>> 
LogError>> $
(>>$ %
e>>% &
.>>& '
Message>>' .
.>>. /
ToString>>/ 7
(>>7 8
)>>8 9
)>>9 :
;>>: ;
}?? 
}@@ 
elseAA 
_loggerBB 
.BB 
LogInformationBB &
(BB& '
$strBB' :
)BB: ;
;BB; <
returnDD 
thisDD 
.DD 
_uowDD 
.DD 
StudentServiceDD +
.DD+ ,
GetByIdDD, 3
(DD3 4
thisDD4 8
.DD8 9
_uowDD9 =
.DD= >
StudentServiceDD> L
.DDL M
GetAllDDM S
(DDS T
)DDT U
.DDU V
MaxDDV Y
(DDY Z
rDDZ [
=>DD\ ^
rDD_ `
.DD` a
	StudentIDDDa j
)DDj k
)DDk l
;DDl m
}EE 	
[HH 	

HttpDeleteHH	 
(HH 
$strHH 
)HH 
]HH 
publicII 
voidII 
DeleteStudentII !
(II! "
intII" %
idII& (
)II( )
{JJ 	
varLL 
studentLL 
=LL 
thisLL 
.LL 
_uowLL #
.LL# $
StudentServiceLL$ 2
.LL2 3
GetByIdLL3 :
(LL: ;
idLL; =
)LL= >
;LL> ?
thisMM 
.MM 
_uowMM 
.MM 
StudentServiceMM $
.MM$ %
DeleteMM% +
(MM+ ,
studentMM, 3
)MM3 4
;MM4 5
tryNN 
{OO 
thisPP 
.PP 
_uowPP 
.PP 
CommitPP  
(PP  !
)PP! "
;PP" #
}QQ 
catchRR 
(RR 
SystemRR 
.RR 
	ExceptionRR #
eRR$ %
)RR% &
{SS 
_loggerTT 
.TT 
LogErrorTT  
(TT  !
eTT! "
.TT" #
MessageTT# *
.TT* +
ToStringTT+ 3
(TT3 4
)TT4 5
)TT5 6
;TT6 7
}UU 
}VV 	
}WW 
}XX ô

cC:\Users\cognizantdotnet31\source\repos\SchoolSystem\BusinessService\BusinessService.Api\Program.cs
	namespace 	
BusinessService
 
. 
Api 
{ 
public 

static 
class 
Program 
{ 
public 
static 
void 
Main 
(  
string  &
[& '
]' (
args) -
)- .
{		 	
CreateHostBuilder

 
(

 
args

 "
)

" #
.

# $
Build

$ )
(

) *
)

* +
.

+ ,
Run

, /
(

/ 0
)

0 1
;

1 2
} 	
public 
static 
IHostBuilder "
CreateHostBuilder# 4
(4 5
string5 ;
[; <
]< =
args> B
)B C
=>D F
Host 
.  
CreateDefaultBuilder %
(% &
args& *
)* +
. $
ConfigureWebHostDefaults )
() *

webBuilder* 4
=>5 7
{ 

webBuilder 
. 

UseStartup )
<) *
Startup* 1
>1 2
(2 3
)3 4
;4 5
} 
) 
; 
} 
} â%
cC:\Users\cognizantdotnet31\source\repos\SchoolSystem\BusinessService\BusinessService.Api\Startup.cs
	namespace 	
BusinessService
 
. 
Api 
{ 
public 

class 
Startup 
{ 
public 
Startup 
( 
IConfiguration %
configuration& 3
)3 4
{ 	
Configuration 
= 
configuration )
;) *
} 	
public 
IConfiguration 
Configuration +
{, -
get. 1
;1 2
}3 4
public 
void 
ConfigureServices %
(% &
IServiceCollection& 8
services9 A
)A B
{ 	
services 
. 
AddControllers #
(# $
)$ %
;% &
services 
. 
AddDbContextPool %
<% &$
BusinessServiceDbContext& >
>> ?
(? @
options 
=> 
options "
." #
UseSqlServer# /
(/ 0
Configuration0 =
.= >
GetConnectionString> Q
(Q R
$strR f
)f g
)g h
)h i
;i j
services!! 
.!! 
	AddScoped!! 
(!! 
typeof!! %
(!!% &
IUnitofWork!!& 1
)!!1 2
,!!2 3
typeof!!4 :
(!!: ;

UnitOfWork!!; E
)!!E F
)!!F G
;!!G H
services"" 
."" 
	AddScoped"" 
("" 
typeof"" %
(""% &
IRepository""& 1
<""1 2
>""2 3
)""3 4
,""4 5
typeof""6 <
(""< =
GenericRepository""= N
<""N O
>""O P
)""P Q
)""Q R
;""R S
services## 
.## 

AddMvcCore## 
(##  
)##  !
;##! "
services$$ 
.$$ 
AddMvc$$ 
($$ 
)$$ 
;$$ 
services'' 
.'' $
AddDistributedRedisCache'' -
(''- .
option''. 4
=>''5 7
{(( 
option)) 
.)) 
Configuration)) $
=))% &
$str))' 2
;))2 3
option** 
.** 
InstanceName** #
=**$ %
$str**& .
;**. /
}++ 
)++ 
;++ 
services.. 
... 
AddSwaggerGen.. "
(.." #
c..# $
=>..% '
{..( )
c// 
.// 

SwaggerDoc// 
(// 
$str// !
,//! "
new//# &
	Microsoft//' 0
.//0 1
OpenApi//1 8
.//8 9
Models//9 ?
.//? @
OpenApiInfo//@ K
{00 
Version11 
=11 
$str11 "
,11" #
Title22 
=22 
$str22 *
,22* +
Description33 
=33  !
$str33" E
}44 
)44 
;44 
}55 
)55 
;55 
}77 	
public:: 
void:: 
	Configure:: 
(:: 
IApplicationBuilder:: 1
app::2 5
,::5 6
IWebHostEnvironment::7 J
env::K N
)::N O
{;; 	
if<< 
(<< 
env<< 
.<< 
IsDevelopment<< !
(<<! "
)<<" #
)<<# $
{== 
app>> 
.>> %
UseDeveloperExceptionPage>> -
(>>- .
)>>. /
;>>/ 0
}?? 
appAA 
.AA 
UseHttpsRedirectionAA #
(AA# $
)AA$ %
;AA% &
appCC 
.CC 

UseRoutingCC 
(CC 
)CC 
;CC 
appEE 
.EE 
UseAuthorizationEE  
(EE  !
)EE! "
;EE" #
appGG 
.GG 
UseEndpointsGG 
(GG 
	endpointsGG &
=>GG' )
{HH 
	endpointsII 
.II 
MapControllersII (
(II( )
)II) *
;II* +
}JJ 
)JJ 
;JJ 
appMM 
.MM 

UseSwaggerMM 
(MM 
)MM 
;MM 
appNN 
.NN 
UseSwaggerUINN 
(NN 
cNN 
=>NN !
{NN" #
cOO 
.OO 
SwaggerEndpointOO !
(OO! "
$strOO" <
,OO< =
$strOO> K
)OOK L
;OOL M
}PP 
)PP 
;PP 
}RR 	
}SS 
}TT ™
fC:\Users\cognizantdotnet31\source\repos\SchoolSystem\BusinessService\BusinessService.Api\UnitOfWork.cs
	namespace 	
BusinessService
 
. 
Api 
{ 
public 

class 

UnitOfWork 
: 
IUnitofWork )
{		 
private

 
readonly

 $
BusinessServiceDbContext

 1

_DbContext

2 <
;

< =
public 
StudentService 
StudentService ,
{- .
get/ 2
;2 3
private4 ;
set< ?
;? @
}A B
public 

UnitOfWork 
( $
BusinessServiceDbContext 2
context3 :
): ;
{ 	
this 
. 

_DbContext 
= 
context %
;% &
this 
. 
StudentService 
=  !
new" %
StudentService& 4
(4 5
this5 9
.9 :

_DbContext: D
)D E
;E F
} 	
public 
void 
Commit 
( 
) 
{ 	
this 
. 

_DbContext 
. 
SaveChanges '
(' (
)( )
;) *
} 	
private 
bool 
disposed 
= 
false  %
;% &
	protected 
virtual 
void 
Dispose &
(& '
bool' +
	disposing, 5
)5 6
{ 	
if 
( 
! 
this 
. 
disposed 
&&  
	disposing! *
)* +
{ 
this 
. 

_DbContext 
. 
Dispose &
(& '
)' (
;( )
} 
this   
.   
disposed   
=   
true    
;    !
}!! 	
public## 
void## 
Dispose## 
(## 
)## 
{$$ 	
Dispose%% 
(%% 
true%% 
)%% 
;%% 
GC&& 
.&& 
SuppressFinalize&& 
(&&  
this&&  $
)&&$ %
;&&% &
}'' 	
}(( 
})) 